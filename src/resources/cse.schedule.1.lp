% See example from here: https://www.cs.utexas.edu/~vl/teaching/378/guide-2.0.pdf#page=35

% Modeling the requirements from: 
% https://www.stonybrook.edu/sb/bulletin/current/academicprograms/cse/degreesandrequirements.php#:~:text=Completion%20of%20the%20major%20requires,be%20completed%20at%20Stony%20Brook.&text=Note%3A%20Students%20may%20substitute%20the,CSE%20214%20and%20CSE%20216.

% New notes/ideas:
% course(name, credits, career, category/requirement)
% prerequisites(name, prereq)
% courses_taken() -- how to include this?

course(cse101, 3).
course(cse102, 3).
course(cse110, 3).
course(cse113, 4).
course(cse114, 4).
course(cse130, 3).
course(cse150, 4).
course(cse160, 3).
course(cse161, 1).
course(cse190, 3).
course(cse191, 3).
course(cse192, 3).
course(cse213, 4).
course(cse214, 4).
course(cse215, 4).
course(cse216, 4).
course(cse220, 4).
course(cse230, 3).
course(cse260, 3).
course(cse261, 1).
course(cse300, 3).
course(cse301, 3).
course(cse303, 3).
course(cse304, 3).
course(cse305, 3).
course(cse306, 3).
course(cse307, 3).
course(cse310, 3).
course(cse311, 3).
course(cse312, 3).
course(cse316, 3).
course(cse320, 3).
course(cse323, 3).
course(cse325, 3).
course(cse327, 3).
course(cse328, 3).
course(cse331, 3).
course(cse332, 3).
course(cse333, 3).
course(cse334, 3).
course(cse336, 3).
course(cse337, 3).
course(cse350, 4).
course(cse351, 3).
course(cse352, 3).
course(cse353, 3).
course(cse354, 3).
course(cse355, 3).
course(cse356, 3).
course(cse357, 3).
course(cse360, 3).
course(cse361, 3).
course(cse362, 3).
course(cse363, 3).
course(cse364, 3).
course(cse366, 3).
course(cse370, 3).
course(cse371, 3).
course(cse373, 3).
course(cse376, 3).
course(cse377, 3).
course(cse378, 3).
course(cse380, 3).
course(cse381, 3).
course(cse385, 4).
course(cse390, 3).
course(cse391, 3).
course(cse392, 3).
course(cse393, 3).
course(cse394, 3).
course(cse416, 3).
course(cse475, 3).
course(cse487, 3).
course(cse488, 3).
course(cse495, 3).
course(cse496, 3).
course(cse502, 3).
course(cse504, 3).
course(cse505, 3).
course(cse506, 3).
course(cse507, 3).
course(cse508, 3).
course(cse509, 3).
course(cse510, 3).
course(cse511, 3).
course(cse512, 3).
course(cse514, 3).
course(cse515, 3).
course(cse516, 1).
course(cse517, 1).
course(cse518, 3).
course(cse519, 3).
course(cse521, 3).
course(cse522, 3).
course(cse523, 3).
course(cse524, 3).
course(cse525, 3).
course(cse526, 3).
course(cse527, 3).
course(cse528, 3).
course(cse529, 3).
course(cse530, 3).
course(cse531, 3).
course(cse532, 3).
course(cse533, 3).
course(cse534, 3).
course(cse535, 3).
course(cse536, 3).
course(cse537, 3).
course(cse538, 3).
course(cse540, 3).
course(cse541, 3).
course(cse542, 3).
course(cse544, 3).
course(cse545, 3).
course(cse546, 3).
course(cse547, 3).
course(cse548, 3).
course(cse549, 3).
course(cse550, 3).
course(cse551, 3).
course(cse552, 3).
course(cse555, 3).
course(cse564, 3).
course(cse566, 3).
course(cse570, 3).
course(cse577, 3).
course(cse581, 3).
course(cse582, 3).
course(cse583, 3).
course(cse587, 3).
course(cse590, 3).
course(cse591, 3).
course(cse592, 3).
course(cse593, 3).
course(cse594, 3).
course(cse595, 3).
course(cse596, 1).
course(cse597, 1).
course(cse599, 3).
course(cse600, 3).
course(cse602, 3).
course(cse605, 3).
course(cse608, 3).
course(cse610, 3).
course(cse613, 3).
course(cse614, 3).
course(cse615, 3).
course(cse617, 3).
course(cse620, 3).
course(cse621, 3).
course(cse624, 3).
course(cse625, 3).
course(cse626, 3).
course(cse628, 3).
course(cse633, 3).
course(cse638, 3).
course(cse639, 1).
course(cse641, 1).
course(cse642, 1).
course(cse643, 1).
course(cse644, 1).
course(cse645, 1).
course(cse646, 1).
course(cse648, 1).
course(cse649, 1).
course(cse650, 1).
course(cse651, 1).
course(cse652, 1).
course(cse653, 1).
course(cse654, 1).
course(cse655, 1).
course(cse656, 1).
course(cse657, 1).
course(cse658, 1).
course(cse659, 1).
course(cse660, 1).
course(cse661, 1).
course(cse662, 1).
course(cse663, 1).
course(cse664, 1).
course(cse665, 2).
course(cse669, 2).
course(cse670, 2).
course(cse671, 2).
course(cse672, 2).
course(cse674, 2).
course(cse677, 2).
course(cse681, 2).
course(cse684, 2).
course(cse686, 2).
course(cse687, 2).
course(cse690, 3).
course(cse691, 3).
course(cse692, 3).
course(cse693, 3).
course(cse694, 1).
course(cse695, 1).
course(cse696, 3).
course(cse697, 1).
course(cse698, 3).
course(cse699, 3).
course(cse700, 3).
course(cse701, 3).
course(cse800, 0).
prerequisite(cse102, cse101).
prerequisite(cse114, cse101).
prerequisite(cse161, cse160).
prerequisite(cse213, cse113).
prerequisite(cse214, cse114).
prerequisite(cse216, cse214).
prerequisite(cse220, cse214).
prerequisite(cse230, cse130).
prerequisite(cse230, cse220).
prerequisite(cse260, cse160).
prerequisite(cse261, cse260).
prerequisite(cse303, cse160).
prerequisite(cse303, cse214).
prerequisite(cse303, cse150).
prerequisite(cse303, cse215).
prerequisite(cse304, cse216).
prerequisite(cse304, cse260).
prerequisite(cse304, cse220).
prerequisite(cse304, cse303).
prerequisite(cse305, cse216).
prerequisite(cse305, cse260).
prerequisite(cse306, cse216).
prerequisite(cse306, cse260).
prerequisite(cse307, cse216).
prerequisite(cse307, cse260).
prerequisite(cse307, cse220).
prerequisite(cse310, cse214).
prerequisite(cse310, cse220).
prerequisite(cse311, cse214).
prerequisite(cse311, cse230).
prerequisite(cse311, cse260).
prerequisite(cse316, cse216).
prerequisite(cse316, cse260).
prerequisite(cse320, cse220).
prerequisite(cse323, cse214).
prerequisite(cse323, cse230).
prerequisite(cse323, cse260).
prerequisite(cse325, cse110).
prerequisite(cse325, cse101).
prerequisite(cse325, cse114).
prerequisite(cse327, cse214).
prerequisite(cse327, cse230).
prerequisite(cse327, cse260).
prerequisite(cse328, cse216).
prerequisite(cse328, cse260).
prerequisite(cse328, cse220).
prerequisite(cse331, cse220).
prerequisite(cse331, cse320).
prerequisite(cse332, cse214).
prerequisite(cse332, cse260).
prerequisite(cse333, cse214).
prerequisite(cse333, cse260).
prerequisite(cse336, cse216).
prerequisite(cse336, cse260).
prerequisite(cse337, cse214).
prerequisite(cse337, cse260).
prerequisite(cse350, cse150).
prerequisite(cse350, cse215).
prerequisite(cse351, cse214).
prerequisite(cse351, cse260).
prerequisite(cse352, cse216).
prerequisite(cse352, cse260).
prerequisite(cse353, cse216).
prerequisite(cse353, cse260).
prerequisite(cse354, cse216).
prerequisite(cse354, cse260).
prerequisite(cse356, cse316).
prerequisite(cse356, cse320).
prerequisite(cse357, cse216).
prerequisite(cse357, cse260).
prerequisite(cse360, cse220).
prerequisite(cse360, cse320).
prerequisite(cse361, cse220).
prerequisite(cse361, cse320).
prerequisite(cse362, cse220).
prerequisite(cse362, cse320).
prerequisite(cse363, cse220).
prerequisite(cse363, cse320).
prerequisite(cse366, cse328).
prerequisite(cse370, cse310).
prerequisite(cse371, cse150).
prerequisite(cse371, cse215).
prerequisite(cse373, cse150).
prerequisite(cse373, cse215).
prerequisite(cse373, cse214).
prerequisite(cse373, cse260).
prerequisite(cse376, cse216).
prerequisite(cse376, cse320).
prerequisite(cse380, cse216).
prerequisite(cse380, cse220).
prerequisite(cse380, cse260).
prerequisite(cse381, cse216).
prerequisite(cse381, cse220).
prerequisite(cse381, cse260).
prerequisite(cse385, cse150).
prerequisite(cse385, cse215).
prerequisite(cse385, cse214).
prerequisite(cse385, cse260).
prerequisite(cse390, cse214).
prerequisite(cse390, cse260).
prerequisite(cse391, cse214).
prerequisite(cse391, cse260).
prerequisite(cse392, cse214).
prerequisite(cse392, cse260).
prerequisite(cse393, cse214).
prerequisite(cse393, cse260).
prerequisite(cse394, cse214).
prerequisite(cse394, cse260).
prerequisite(cse416, cse316).
prerequisite(cse496, cse495).
prerequisite(cse608, cse508).
prerequisite(cse608, cse509).
prerequisite(cse624, cse506).


% Constants
min_credits_per_semester(12).
max_credits_per_semester(52). % 55 is cutoff of 1 model, 52 gives 1000s of models
total_required_credits(80).

% Assign courses to semesters (1..N), N is an upper bound on semesters, guessed here as 10
semester(1..10).

% Assign a course to exactly one semester
1 { in_semester(C, S) : semester(S) } 1 :- course(C, _).

% Constraint to ensure the minimum number of credits per semester
:- semester(S), min_credits_per_semester(Min), #sum{Credits, C : course(C, Credits), in_semester(C, S)} < Min.

% Ensure the total credits in each semester do not exceed the maximum allowed
:- semester(S), max_credits_per_semester(Max), #sum{Credits, C : course(C, Credits), in_semester(C, S)} > Max.

% Ensuring all prerequisites are met
:- course(C, _), in_semester(C, SC), prerequisite(C, P), course(P, _), in_semester(P, SP), SP >= SC.

% Define the maximum semester used
max_semester_used(M) :- M = #max{S : in_semester(_, S)}.

% Minimize the number of semesters used
#minimize{M : max_semester_used(M)}.

% Output control
#show in_semester/2.
